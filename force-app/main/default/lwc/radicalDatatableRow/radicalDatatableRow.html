<template>
    <!-- childSobject: {childSobject}  -->
    <template for:each={fields} for:item="field">

        <td key={field.value} class="slds-text-align_center slds-cell_action-mode" data-label={field.label}>
            <div key={field.value} title={field.label}>
                <c-radical-datatable-cell
                    key={field.value}
                    record-id={recordId}
                    field={field}
                    record={record}
                    edit-state={editState}
                    oncellchange={handleCellChange}
                    child-sobject={childSobject}
                ></c-radical-datatable-cell>
            </div>
        </td>

    </template>

    <td class="slds-text-align_center slds-cell_action-mode">
        <span title="edit">
            
            <!-- sldsValidatorIgnoreNextLine -->
            <template lwc:if={isEdit}>

                <lightning-button-icon
                    class="slds-m-left_xx-small" 
                    title="Save"
                    variant="border-filled" 
                    alternative-text="Save" 
                    icon-name='utility:save'
                    onclick={handleSaveClick}
                    disabled={isSaving}
                ></lightning-button-icon>

                <lightning-button-icon
                    class="slds-m-left_xx-small" 
                    title="Edit"
                    variant="border-filled" 
                    alternative-text="Cancel" 
                    icon-name='utility:close'
                    onclick={handleCancelClick}
                    disabled={isSaving}
                ></lightning-button-icon>
            </template>
            <template lwc:elseif={isSaving}>
                <lightning-dynamic-icon
                    type="ellie"
                    alternative-text="Saving..."
                ></lightning-dynamic-icon>
            </template>
            <template lwc:else>
                <lightning-button-icon
                    class="slds-m-left_xx-small" 
                    title="Edit"
                    variant="brand" 
                    alternative-text="Edit" 
                    icon-name='utility:edit'
                    onclick={handleEditClick}
                    disabled={isSaving}
                ></lightning-button-icon>
            </template>
        </span>

        <template lwc:if={showDeleteButton}>
            <span>
                <lightning-button-icon
                    class="slds-m-left_xx-small deleteBtn" 
                    title="Delete"
                    alternative-text="Delete" 
                    icon-name='utility:delete'
                    onclick={handleDeleteClick}
                    disabled={isSaving}
                ></lightning-button-icon>
            </span>
        </template>
    </td>

</template>